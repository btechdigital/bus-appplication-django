{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
<div class="moto-widget moto-widget-block moto-spacing-top-large moto-spacing-right-auto moto-spacing-bottom-large moto-spacing-left-auto" data-widget="block" data-spacing="lala" style="background-image:url('{% static 'img/mt-1185-header-bg.jpg' %}');background-position:top;background-repeat:no-repeat;background-size:cover;" data-bg-image="2017/09/mt-1185-header-bg02.jpg" data-bg-position="top">
    <div class="container-fluid">
        <div class="row">
            <div class="moto-cell col-sm-12" data-container="container">
                <div class="moto-widget moto-widget-row row-fixed moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" data-grid-type="sm" data-widget="row" data-spacing="aaaa" style="" data-bg-position="left top">
                    <div class="container-fluid">
                        <div class="row" data-container="container">
                            <div class="moto-widget moto-widget-row__column moto-cell col-sm-12 moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" style="" data-widget="row.column" data-container="container" data-spacing="aaaa" data-bg-position="left top">
                                <div class="moto-widget moto-widget-text moto-preset-default moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" data-widget="text" data-preset="default" data-spacing="aaaa" data-animation="">
                                    <div class="moto-widget-text-content moto-widget-text-editable">
                                        <h1 class="moto-text_system_5">WE ARE HIRING</h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="moto-widget moto-widget-row row-fixed moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" data-grid-type="sm" data-widget="row" data-spacing="aaaa" style="margin:10rem 0rem" data-bg-position="left top">
    <div class="container-fluid">
        <div class="row" data-container="container">
            <div class="moto-widget moto-widget-row__column moto-cell col-sm-6 moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" style="" data-widget="row.column" data-container="container" data-spacing="aaaa" data-bg-position="left top">
                <div class="moto-widget moto-widget-container moto-container_content_59c9f7871" data-widget="container" data-container="container" data-css-name="moto-container_content_59c9f7871" data-bg-position="left top">
                    <div class="moto-widget moto-widget-text moto-preset-default moto-spacing-top-medium moto-spacing-right-medium moto-spacing-bottom-auto moto-spacing-left-medium" data-widget="text" data-preset="default" data-spacing="mmam" data-animation="">
                        <div class="moto-widget-text-content moto-widget-text-editable">
                            <h3 class="moto-text_system_9">Bus Type: <span>{{bus.bus_type.name}}</span></h3>
                            <hr>
                            <p class="moto-text_system_7">Book a Seat on: {{ bus.name }} </p>
                            <hr>
                            <h5 class="moto-text_system_7">Destination: {{ route.departure_city }} to {{ route.arrival_city }}</h5>
                            <hr>
                            <h5 class="moto-text_system_7">Price: {{ route.price }} XAF</h5>
                            <hr>
                            <h5 class="moto-text_system_7">Date: {{ route.departure_time|date:"Y-m-d"|default:"No date" }}</h5>
                            <hr>
                            <h5 class="moto-text_system_7">Time: {{ route.departure_time }}</h5>
                            <hr>
                            <p class="moto-text_system_7">Bus Number: {{ bus.bus_number }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="moto-widget moto-widget-row__column moto-cell col-sm-6 moto-spacing-top-auto moto-spacing-right-auto moto-spacing-bottom-auto moto-spacing-left-auto" style="" data-widget="row.column" data-container="container" data-spacing="aaaa" data-bg-position="left top">
                <div class="moto-widget moto-widget-container moto-container_content_59c9fc032" data-widget="container" data-container="container" data-css-name="moto-container_content_59c9fc032" data-bg-position="left top">
                    <div class="moto-widget moto-widget-text moto-preset-default moto-spacing-top-medium moto-spacing-right-medium moto-spacing-bottom-auto moto-spacing-left-medium" data-widget="text" data-preset="default" data-spacing="mmam" data-animation="">
                        <div class="moto-widget-text-content moto-widget-text-editable">
                            <form action="" method="POST" class="moto-widget-contact_form-form">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-lg-6">
                                        {% if seat == 0 or available_seats|length == 0  %}
                                                <h5 class="moto-text_system_7" style="margin:5rem">Booking for this Bus is Full. Please book another bus.  <a href='/' style='color:red'>Go Back</a></h5>
                                                 {% else %}
                                                <label for="seat_id" class="moto-text_system_7">Select a Seat:</label>
                                            
                                           
                                                <select name="seat_id" id="seat_id" style="padding: 10px; border-radius: 5px" class="moto-widget-contact_form-field moto-widget-contact_form-input">
                                                    {% for seat in available_seats %}
                                                        <option value="{{ seat.id }}">Seat {{ seat.seat_number }}</option>
                                                    {% endfor %}
                                                </select>
                                            
                                    </div><br>
                                    <button type="submit" style=" margin-left: 10px; padding: 8px; border-radius: 5px; background-color:brown; border:none; cursor: pointer; color:#fff; font-size:14px"><span class="fa moto-widget-theme-icon"></span><span class="moto-widget-button-divider"></span><span class="moto-widget-button-label">Book Now</span></button>
                                    {% endif %}
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}